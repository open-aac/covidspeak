module WordCode
  def self.temp_code(room_id)
    words = nil
    lookup = nil
    tries = 0
    while tries < 20 && (!words || RedisAccess.default.get(lookup))
      tries += 1
      words = WordCode::WORDS.shuffle[0, 3]
      lookup = "temp_code/#{words.join('/')}"
    end
    raise "none found" if tries >= 20
    RedisAccess.default.setex(lookup, 6.minutes.to_i, room_id.to_s)
    words.join(' ')
  end

  def self.room_id(temp_code)
    words = temp_code.downcase.split(/[\s-]+/).select{|w| !w.blank? }[0, 3]
    res = RedisAccess.default.get("temp_code/#{words.join('/')}").to_s
    res
  end

WORDS = %{
ability
accident
acorn
action
address
adult
afternoon
age
aim
airplane
airport
alarm
allowed
almond
amazon
analogy
angel
antler
apple
apron
arm
arrow
artist
attack
author
avocado
axis
baby
bacon
bagel
balloon
banjo
bark
basement
bath
bathroom
battery
bean
bedroom
beef
belly
biology
black
blend
blood
board
bonfire
border
bottle
box
brass
breeze
broom
brother
brownie
bullet
burst
butter
button
cabin
cactus
cake
camel
camera
candle
candy
cardboard
carnival
carrot
cartoon
category
celery
chair
chalk
chapter
check
chess
chicken
chocolate
church
city
classic
clipboard
clock
clothes
coffee
collect
color
comic
community
complex
computer
cone
contact
control
convert
cook
copper
corner
costume
count
cowbell
cowboy
cradle
crash
cream
create
crime
cross
crowded
cupcake
dad
dairy
darkness
deadline
deck
deep
demand
dentist
desk
diet
dig
dinner
disability
disaster
discount
display
document
donkey
doorbell
download
dragon
dress
drink
drug
duck
earplug
earth
ecology
egg
envelope
episode
escort
evening
exam
exit
explore
eyebrow
fabric
factory
family
farmer
father
find
fireman
fishing
flag
flood
flower
focus
food
footstep
forehead
fork
fox
freedom
fries
frosting
frown
gallery
game
garlic
gather
giant
girl
glasses
gold
goodbye
gorilla
gravity
grill
habit
hamburger
handle
headphones
heaven
heavy
hello
hexagon
hike
hobby
holiday
honey
hornet
hotel
hug
hundred
husband
idea
illness
immigrant
import
inch
index
industry
insect
internet
investigate
jam
jar
jeep
jelly
jogging
judge
juice
jumping
kazoo
keep
keyboard
kidney
killer
kindness
kingdom
kingfish
kiss
kitten
knife
lab
label
ladder
ladybug
lake
landing
lantern
laptop
last
lava
layer
leader
leadership
leading
leave
left
leg
lemon
lemonade
lesson
letter
library
lid
lifetime
limit
lion
liver
load
lobby
locker
locket
longboat
look
lotion
loyal
lucky
lunchtime
magnet
mailman
maintain
makeup
manager
mankind
manners
many
marker
mask
math
maybe
meatball
medium
meeting
melody
melon
member
membership
memory
men
message
messy
metal
method
metric
middle
milk
milkshake
million
mint
misfit
mistake
mitten
model
moment
money
monster
month
moose
motel
moth
mother
mound
mouth
movie
muffin
mushroom
music
mustard
name
napkin
need
needle
neglect
nest
network
newspaper
nickname
ninja
noodle
notebook
notepad
nothing
number
oak
object
observe
octagon
octopus
offer
office
officer
opera
orange
organ
outcome
outhouse
outlaw
outlet
outlook
output
oval
oven
owl
oxygen
oyster
package
paddle
page
paint
painting
pancake
panda
panther
paper
parade
paramedic
parent
parking
partner
party
passport
password
payment
peanut
pedal
penny
pepper
permit
person
piano
pickle
pickup
picnic
picture
pigpen
pillow
pilot
pipe
pitcher
pizza
place
planet
playground
playroom
plow
pocket
poncho
pond
popcorn
pork
possible
powder
present
price
princess
printer
private
problem
product
progress
promise
public
puddle
pump
pumpkin
puppy
purchase
puzzle
quart
queen
question
quiet
quilt
rabbit
radio
railroad
rainbow
raincoat
rainstorm
raisin
ranch
read
reading
reality
reason
reboot
record
rectangle
red
reflect
refund
register
regret
remain
remote
remove
rent
repeat
report
request
resist
resort
respond
restroom
result
return
reward
ribbon
road
robot
rocket
room
rope
rose
round
rubber
running
rush
rust
sadness
safe
salary
saloon
salsa
sand
sandpaper
sandwich
scarf
school
scooter
scrap
screen
script
second
secret
selling
sending
servant
service
shade
shadow
shallow
shampoo
shark
shelf
shirt
shopping
shorts
shout
shovel
shrimp
sick
sickness
sidewalk
simple
singing
sink
sister
size
skating
skeleton
skin
sleep
slide
slippers
smell
smile
smoke
smoking
snack
snake
sneeze
snowboard
snowflake
snowman
snowplow
snowstorm
soap
socks
soda
solid
somebody
someone
someplace
song
sort
sound
soup
south
space
speaker
special
speech
speed
spending
sport
spray
spread
sprout
spy
square
squid
stairs
standard
starter
stepstool
stick
sticker
stitch
stock
stone
stool
story
strawberry
street
strength
stress
string
student
stuff
subgroup
subject
subset
substance
subtitle
sucker
suggest
sunbeam
sunglasses
sunrise
sunset
sunshine
supervise
supply
surfing
surfboard
sushi
swallow
swamp
sweet
swim
swimming
switch
symbol
table
tablecloth
tablet
tadpole
talking
teacher
teaching
teenager
temper
tennis
tested
thanks
tiger
timeline
timer
timetable
toast
today
tomorrow
toothbrush
toothpaste
toothpick
tornado
total
towel
tower
training
transport
trap
trapdoor
treatment
triangle
tripod
trusted
tugboat
turkey
turtle
twig
twins
twist
twitter
uncle
under
underground
understand
underwater
uniform
university
update
upgrade
uplift
upstairs
urgent
usual
utility
vacation
vaccine
valley
vanilla
vehicle
verdict
veteran
victory
video
village
vinegar
violin
visit
vitamin
volleyball
volume
volunteer
vomit
voting
voyage
waffle
wagon
waiting
wallet
walnut
walrus
wardrobe
warmth
warning
washcloth
waste
water
waterbed
watermelon
wax
weakness
wealth
weapon
welcome
western
wheel
whirlpool
whisper
white
willing
willow
wilted
window
wingtip
winner
wisdom
witch
witness
woman
wonder
woodchuck
wool
workshop
world
worry
worship
wrench
wrestle
wrist
wrong
yahoo
yarn
yellow
yesterday
yoga
youngster
yoyo
zebra
zero
zipper
zombie
zone
zoo
}.split(/\n/)
end