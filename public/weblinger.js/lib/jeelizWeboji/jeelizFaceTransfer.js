 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACETRANSFERAPI=(function(){function da(b){var c=new XMLHttpRequest;c.open("GET",a.ab+a.save,!0);c.withCredentials=!1;c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&0!==c.status||b(c.responseText)};c.send()}function qa(){for(var b=a.Jb,c=Array(b),d=0;d<b;++d)c[d]=0;return c}function ta(b,c,d){b=Math.min(Math.max((d-b)/(c-b),0),1);return b*b*(3-2*b)}function ua(b,c,d){return Math.min(Math.max((d-b)/(c-b),0),1)}function xa(b,c,d,f){return Math.pow(Math.min(Math.max((f-b)/(c-b),0),1),d)}
function Ba(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Da(b,c){var d=c%8;return b[(c-d)/8]>>7-d&1}
function Ea(b){var c=JSON.parse(b);b=c.ne;var d=c.nf,f=c.n;var l="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var m=l.length;c=new Uint8Array(m);for(var k=0;k<m;++k)c[k]=l.charCodeAt(k);l=new Float32Array(f);m=new Float32Array(d);k=b+d+1;for(var p=0;p<f;++p){for(var n=k*p,v=0===Da(c,n)?1:-1,h=n+1,q=1,u=0,y=h+b-1;y>=h;--y)u+=q*Da(c,y),q*=2;h=u;n=n+1+b;q=m.length;u=0;for(y=n;y<n+q;++y)m[u]=Da(c,y),++u;for(q=n=0;q<d;++q)n+=m[q]*Math.pow(2,-q-1);l[p]=0===n&&0===
h?0:v*(1+n)*Math.pow(2,1+h-Math.pow(2,b-1))}return l}
var z=function(){function b(e,w){e=t.createShader(e);t.shaderSource(e,w);t.compileShader(e);return t.getShaderParameter(e,t.COMPILE_STATUS)?e:!1}function c(e,w){e=b(t.VERTEX_SHADER,e);w=b(t.FRAGMENT_SHADER,w);l.push(e,w);var C=t.createProgram();t.attachShader(C,e);t.attachShader(C,w);t.linkProgram(C);return C}function d(e){void 0===e.aa&&(e.aa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===e.da&&(e.da=["a0"]);void 0===
e.U&&(e.U=[2]);if(void 0===e.precision||"highp"===e.precision)e.precision=v;e.id=p++;void 0!==e.ud&&e.ud.forEach(function(C,Y){e.b=e.b.replace(C,e.sa[Y])});e.$a=0;e.U.forEach(function(C){e.$a+=4*C});e.X=c(e.aa,"precision "+e.precision+" float;\n"+e.b);e.j={};e.c.forEach(function(C){e.j[C]=t.getUniformLocation(e.X,C)});e.attributes={};e.V=[];e.da.forEach(function(C){var Y=t.getAttribLocation(e.X,C);e.attributes[C]=Y;e.V.push(Y)});if(e.f){t.useProgram(e.X);k=e;m=e.id;for(var w in e.f)t.uniform1i(e.j[w],
e.f[w])}e.Ja=!0}function f(e){Fa.zd(J);m!==e.id&&(J.$(),m=e.id,k=e,t.useProgram(e.X),e.V.forEach(function(w){0!==w&&t.enableVertexAttribArray(w)}))}var l=[],m=-1,k=null,p=0,n=!1,v="highp",h=["u1"],q=["u0"],u={u1:0},y={u0:0},P={u1:0,u2:1},M={u3:0},D={s0:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:h,f:u},s1:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:h,f:u,precision:"lowp"},s2:{b:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
c:["u1","u2"],f:P},s3:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",c:h,f:u},s4:{b:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",c:["u1","u2"],f:P},s5:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",c:h,f:u},s6:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
c:h,f:u},s7:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",c:["u0","u4"],f:y},s8:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",c:["u0","u4"],f:y},s9:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
c:h,f:u},s10:{b:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",c:["u1","u5","u6"],f:{u1:0,u5:1}},s11:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",c:["u1","u7"],f:u},s12:{b:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
c:["u1","u8"],f:u},s13:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",c:q,f:y},s14:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",c:q,f:y},s15:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",c:q,f:y},s16:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",
c:q,f:y},s17:{b:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",c:["u0","u6","u9"],f:{u0:0,u6:1,u9:2}},s18:{b:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",c:q,f:y},s19:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",
c:q,f:y},s20:{b:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",c:["u0","u10","u11"],f:{u0:0,u10:1}},s21:{b:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
c:["u1","u12"],f:u},s22:{b:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",c:["u13","u14","u15"],f:{u14:0,u13:1,u15:2}},s23:{b:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",c:["u14","u13","u16"],f:{u14:0,u13:1}},s24:{b:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
c:"u13 u14 u16 u20 u17 u18 u19".split(" "),f:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6}},s25:{b:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",c:"u13 u14 u16 u22 u23 u24 u21".split(" "),f:{u14:0,
u13:1,u21:2}},s26:{b:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",c:["u13","u14"],f:{u14:0,u13:1}},s27:{b:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",c:["u1","u21","u25"],f:{u1:0,u21:1}},s28:{b:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
c:h,f:u,precision:"lowp"},s29:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",c:["u1","u26"],f:u,precision:"lowp"},s30:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
c:["u1","u26"],f:u,precision:"lowp"},s31:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
c:["u1","u2","u27"],f:P},s32:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",c:["u1","u2","u27"],f:P},s33:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
c:["u3","u7"],f:M},s34:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",c:["u3","u7"],f:M},s35:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
c:["u1"],f:u,precision:"lowp"},s36:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",c:["u7","u1"],f:u,precision:"lowp"},s37:{b:"uniform sampler2D u1,u28,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u28,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
c:["u1","u28","u29"],f:{u1:0,u28:1,u29:2}}},F={s38:{b:"uniform float u16,u30;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:["u16","u13","u14","u21","u30"],sa:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{b:"uniform float u16,u30,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:"u16 u24 u13 u14 u21 u30".split(" "),sa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},J={Na:function(){return n},i:function(){if(!n){v="highp";for(var e in D)d(D[e],e);z.set("s0");t.enableVertexAttribArray(0);e=Ia.i();n=!0;return e}},dc:function(e){e.forEach(function(w){J.fb(w)})},fb:function(e){D[e.id]=e;d(e,e.id)},zb:function(e,w,C){w||(w=e);D[w]=Object.create(F[e]);D[w].Sc=!0;F[e].sa&&F[e].sa.forEach(function(Y,ia){D[w].b=D[w].b.replace(new RegExp(Y,"g"),C[ia])});d(D[w],w)},set:function(e){f(D[e])},
Ec:function(e){return"undefined"===typeof D[e]?!1:D[e].Ja},$:function(){-1!==m&&(m=-1,k.V.forEach(function(e){0!==e&&t.disableVertexAttribArray(e)}))},Wa:function(){var e=0;k.V.forEach(function(w,C){C=k.U[C];t.vertexAttribPointer(w,C,t.FLOAT,!1,k.$a,e);e+=4*C})},Vd:function(){t.enableVertexAttribArray(0)},Xa:function(){t.vertexAttribPointer(k.V[0],2,t.FLOAT,!1,8,0)},xe:function(e,w){t.uniform1i(k.j[e],w)},C:function(e,w){t.uniform1f(k.j[e],w)},Y:function(e,w,C){t.uniform2f(k.j[e],w,C)},ye:function(e,
w){t.uniform2fv(k.j[e],w)},ze:function(e,w){t.uniform3fv(k.j[e],w)},Ub:function(e,w,C,Y){t.uniform3f(k.j[e],w,C,Y)},Ae:function(e,w,C,Y,ia){t.uniform4f(k.j[e],w,C,Y,ia)},Va:function(e,w){t.uniform4fv(k.j[e],w)},Be:function(e,w){t.uniformMatrix2fv(k.j[e],!1,w)},Ce:function(e,w){t.uniformMatrix3fv(k.j[e],!1,w)},De:function(e,w){t.uniformMatrix4fv(k.j[e],!1,w)},D:function(e,w){J.set(e);w.forEach(function(C){switch(C.type){case "4f":t.uniform4fv(k.j[C.name],C.value);break;case "3f":t.uniform3fv(k.j[C.name],
C.value);break;case "2f":t.uniform2fv(k.j[C.name],C.value);break;case "1f":t.uniform1f(k.j[C.name],C.value);break;case "1i":t.uniform1i(k.j[C.name],C.value);break;case "mat2":t.uniformMatrix2fv(k.j[C.name],!1,C.value);break;case "mat3":t.uniformMatrix3fv(k.j[C.name],!1,C.value);break;case "mat4":t.uniformMatrix4fv(k.j[C.name],!1,C.value)}})},de:function(){return"lowp"},h:function(){t.disableVertexAttribArray(0);J.$();for(var e in D){var w=D[e];w.Ja&&(w.Ja=!1,t.deleteProgram(w.X));w.Sc&&delete D[e]}l.forEach(function(C){t.deleteShader(C)});
l.splice(0);p=0;n=!1}};return J}(),t=null,Ka=function(){function b(h){console.log("ERROR in ContextFeedForward: ",h);return!1}function c(){if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)return!0;if(/(Mac)/i.test(navigator.platform)){var h;(h=navigator.userAgent)?(h=h.match(/Mac OS X (\d+)_(\d+)/)||h.match(/Mac OS X (\d+).(\d+)/),h=!h||3>h.length?!1:[parseInt(h[1],10),parseInt(h[2],10)]):h=!1;if(h&&10===h[0]&&
15===h[1])return!0}return!1}var d=null,f=null,l=null,m=null,k=!0,p=null,n=null,v={s:function(){return d.width},G:function(){return d.height},ja:function(){return d},Xd:function(){return t},m:function(){return k},flush:function(){t.flush()},Hc:function(){p||(p=new Uint8Array(d.width*d.height*4));t.readPixels(0,0,d.width,d.height,t.RGBA,t.UNSIGNED_BYTE,p);return p},Zd:function(){return d.toDataURL("image/jpeg")},$d:function(){G.v();f||(f=document.createElement("canvas"),l=f.getContext("2d"));f.width=
d.width;f.height=d.height;for(var h=v.Hc(),q=l.createImageData(f.width,f.height),u=f.width,y=f.height,P=q.data,M=0;M<y;++M)for(var D=y-M-1,F=0;F<u;++F){var J=4*(M*u+F),e=4*(D*u+F);P[J]=h[e];P[J+1]=h[e+1];P[J+2]=h[e+2];P[J+3]=h[e+3]}l.putImageData(q,0,0);return f.toDataURL("image/png")},Yd:function(h){!f&&h&&(f=document.createElement("canvas"),l=f.getContext("2d"));var q=h?f:document.createElement("canvas");q.width=d.width;q.height=d.height;(h?l:q.getContext("2d")).drawImage(d,0,0);return q},i:function(h){h.ob&&
!h.nb?d=document.getElementById(h.ob):h.nb&&(d=h.nb);d||(d=document.createElement("canvas"));d.width=h&&void 0!==h.width?h.width:512;d.height=h&&void 0!==h.height?h.height:512;"undefined"===typeof h&&(h={});void 0===h.premultipliedAlpha&&(h.premultipliedAlpha=!1);void 0===h.Ma&&(h.Ma=!0);void 0===h.antialias&&(h.antialias=!1);if(!t){var q={antialias:h.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:h.premultipliedAlpha,stencil:!1,depth:h.Ma};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(q.antialias=!1);c()||(t=d.getContext("webgl2",q));t?k=!0:((t=d.getContext("webgl",q))||(t=d.getContext("experimental-webgl",q)),k=!1)}if(!t)return b("WebGL is not enabled");(m=t.getExtension("WEBGL_lose_context"))&&h.Kb&&(n=h.Kb,d.addEventListener("webglcontextlost",n,!1));if(!Ja.i())return b("Not enough capabilities");if(!Ja.oc()&&k)return b("Your configuration cannot process color buffer float");t.clearColor(0,0,0,0);t.disable(t.DEPTH_TEST);t.disable(t.BLEND);t.disable(t.DITHER);t.disable(t.STENCIL_TEST);
t.disable(t.SCISSOR_TEST);t.GENERATE_MIPMAP_HINT&&t.hint(t.GENERATE_MIPMAP_HINT,t.FASTEST);t.disable(t.SAMPLE_ALPHA_TO_COVERAGE);t.disable(t.SAMPLE_COVERAGE);return!0},ke:function(){if(!z.i())return!1;t.depthFunc(t.LEQUAL);t.clearDepth(1);return!0},h:function(){t&&Ja.h();m&&n&&(d.removeEventListener("webglcontextlost",n,!1),n=null);p=l=f=d=null}};return v}(),Fa=function(){var b="undefined"===typeof z?null:z;return{zd:function(c){b!==c&&(b&&b.$(),b=c)},Na:function(){return b.Na()},Xa:function(){b.Xa()},
Wa:function(){b.Wa()},$:function(){b.$()},set:function(c){b.set(c)},h:function(){b.h&&b.h()}}}(),L=function(){var b=null,c=null,d=0,f=-2,l=-2,m=!1,k=[],p={reset:function(){l=f=-2},i:function(){m||(b=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,b),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),t.STATIC_DRAW),c=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),t.STATIC_DRAW),p.Ba(),m=!0)},instance:function(n){var v=
d++,h=n.M?n.M.length:0,q="undefined"===typeof n.mode?t.STATIC_DRAW:n.mode,u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u);t.bufferData(t.ARRAY_BUFFER,n.$b instanceof Float32Array?n.$b:new Float32Array(n.$b),q);f=v;var y=null,P=null,M=null;if(n.M){y=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,y);var D=null;65536>n.M.length?(D=Uint16Array,P=t.UNSIGNED_SHORT,M=2):(D=Uint32Array,P=t.UNSIGNED_INT,M=4);t.bufferData(t.ELEMENT_ARRAY_BUFFER,n.M instanceof D?n.M:new D(n.M),q);l=v}var F={nc:function(J){f!==
v&&(t.bindBuffer(t.ARRAY_BUFFER,u),f=v);J&&Fa.Wa()},kc:function(){l!==v&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,y),l=v)},bind:function(J){F.nc(J);F.kc()},Td:function(){t.drawElements(t.TRIANGLES,h,P,0)},Ud:function(J,e){t.drawElements(t.TRIANGLES,J,P,e*M)},remove:function(){t.deleteBuffer(u);n.M&&t.deleteBuffer(y);F=null}};k.push(F);return F},Ba:function(){-1!==f&&(t.bindBuffer(t.ARRAY_BUFFER,b),f=-1);-1!==l&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),l=-1)},g:function(n,v){n&&L.Ba();v&&Fa.Xa();t.drawElements(t.TRIANGLES,
3,t.UNSIGNED_SHORT,0)},sb:function(){t.deleteBuffer(b);t.deleteBuffer(c)},h:function(){p.sb();k.forEach(function(n){n.remove()});t.bindBuffer(t.ARRAY_BUFFER,null);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);p.reset();m=!1;k.splice(0);d=0}};return p}(),G=function(){var b=null,c=null,d=null,f=!1,l=[],m={o:-2,qb:1},k={i:function(){if(!f){b=t.createFramebuffer();var p=Ja.m();c=p&&t.DRAW_FRAMEBUFFER?t.DRAW_FRAMEBUFFER:t.FRAMEBUFFER;d=p&&t.READ_FRAMEBUFFER?t.READ_FRAMEBUFFER:t.FRAMEBUFFER;f=!0}},be:function(){return c},
Fa:function(){return d},P:function(){return t.FRAMEBUFFER},ee:function(){return m},Wd:function(){return b},instance:function(p){void 0===p.Cb&&(p.Cb=!1);var n=p.Z?p.Z:null,v=p.width,h=void 0!==p.height?p.height:p.width,q=b,u=null,y=!1,P=!1,M=0;n&&(v=v?v:n.s(),h=h?h:n.G());var D={Sb:function(){y||(q=t.createFramebuffer(),y=!0,M=m.qb++)},cc:function(){D.Sb();D.l();u=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,u);t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,v,h);t.framebufferRenderbuffer(c,
t.DEPTH_ATTACHMENT,t.RENDERBUFFER,u);t.clearDepth(1)},bind:function(F,J){M!==m.o&&(t.bindFramebuffer(c,q),m.o=M);n&&n.l();J&&t.viewport(0,0,v,h);F&&t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},Md:function(){M!==m.o&&(t.bindFramebuffer(c,q),m.o=M)},clear:function(){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},Qd:function(){t.clear(t.COLOR_BUFFER_BIT)},Rd:function(){t.clear(t.DEPTH_BUFFER_BIT)},Ad:function(){t.viewport(0,0,v,h)},l:function(){M!==m.o&&(t.bindFramebuffer(c,q),m.o=M)},rtt:function(F){n=
F;m.o!==M&&(t.bindFramebuffer(t.FRAMEBUFFER,q),m.o=M);F.l()},v:function(){t.bindFramebuffer(c,null);m.o=-1},resize:function(F,J){v=F;h=J;u&&(t.bindRenderbuffer(t.RENDERBUFFER,u),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,v,h))},remove:function(){q===b||P||(t.bindFramebuffer(c,q),t.framebufferTexture2D(c,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),u&&t.framebufferRenderbuffer(c,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,null),t.bindFramebuffer(c,null),t.deleteFramebuffer(q),u&&t.deleteRenderbuffer(u));
P=!0}};p.Cb&&D.cc();l.push(D);return D},v:function(){t.bindFramebuffer(c,null);m.o=-1},Id:function(){t.bindFramebuffer(c,null);t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);t.viewport(0,0,Ja.s(),Ja.G());m.o=-1},reset:function(){m.o=-2},F:function(){0!==m.o&&(t.bindFramebuffer(c,b),m.o=0)},clear:function(){t.viewport(0,0,Ja.s(),Ja.G());t.clear(t.COLOR_BUFFER_BIT)},h:function(){k.v();l.forEach(function(p){p.remove()});t.deleteFramebuffer(b);k.reset();f=!1;l.splice(0);m.o=-2;m.qb=1}};return k}(),R=
function(){function b(r){t.bindTexture(t.TEXTURE_2D,r)}function c(r){ba[0]=r;r=ca[0];var B=r>>16&32768,g=r>>12&2047,K=r>>23&255;return 103>K?B:142<K?B|31744|((255==K?0:1)&&r&8388607):113>K?(g|=2048,B|(g>>114-K)+(g>>113-K&1)):B=(B|K-112<<10|g>>1)+(g&1)}function d(r){var B=new Uint16Array(r.length);r.forEach(function(g,K){B[K]=c(g)});return B}function f(){if(null!==fa.Ha)return fa.Ha;var r=m(d([1,1,1,1]));return null===r?!0:fa.Ha=r}function l(){if(null!==fa.Ia)return fa.Ia;var r=m(new Uint8Array([255,
255,255,255]));return null===r?!0:fa.Ia=r}function m(r){if(!Fa.Na()||!M)return null;var B=null;try{var g=t.getError();B=E.instance({isFloat:!1,w:!0,array:r,width:1});g=t.getError();if(g!==t.NO_ERROR)return!1}catch(K){return!1}G.v();t.viewport(0,0,1,1);t.clearColor(0,0,0,0);t.clear(t.COLOR_BUFFER_BIT);Fa.set("s0");B.jb(0);L.g(!1,!0);r=new Uint8Array(4);t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,r);r=.9<r[0];B.remove();G.F();return r}var k=0,p=null,n=0,v=null,h=null,q=null,u=null,y=null,P=null,M=!1,
D=[],F={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,u:null,Rc:!1,w:!1,L:null,oa:4,Oa:0},J=!1,e=null,w=null,C=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],Y=!1,ia=!1,ba=new Float32Array(1),ca=new Int32Array(ba.buffer),fa={Ha:null,Ia:null},E={i:function(){if(!M){y=[t.RGB,!1,t.RGB,t.RGBA];P=[t.RGB,!1,t.RGB,t.RGBA];p=[t.TEXTURE0,t.TEXTURE1,t.TEXTURE2,t.TEXTURE3,t.TEXTURE4,
t.TEXTURE5,t.TEXTURE6,t.TEXTURE7];Y="undefined"!==typeof JEContext;ia="undefined"!==typeof Ja;Y&&JEContext.re()&&p.push(t.TEXTURE8,t.TEXTURE9);v=[-1,-1,-1,-1,-1,-1,-1,-1];u=[t.UNSIGNED_BYTE,t.FLOAT,t.FLOAT];if(!h){for(var r=new Float32Array(16384),B=0;16384>B;++B)r[B]=2*Math.random()-1;h={random:E.instance({isFloat:!0,isPot:!0,array:r,width:64}),Yb:E.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}M=!0}},Pc:function(){E.Jd()},ie:function(){return h.Yb},Jd:function(){u[1]=
Ja.la()},wd:function(){P=y=[t.RGBA,t.RGBA,t.RGBA,t.RGBA]},rd:function(r,B){z.set("s1");G.v();var g=r.s(),K=r.G();t.viewport(0,0,g,K);r.a(0);L.g(!1,!1);t.readPixels(0,0,g,K,t.RGBA,t.UNSIGNED_BYTE,B)},Fc:function(r,B,g){t.activeTexture(t.TEXTURE0);k=0;var K=t.createTexture();b(K);var ea=Ja.m()&&t.RGBA32F?t.RGBA32F:t.FLOAT;B=B instanceof Float32Array?B:new Float32Array(B);var Z=Math.log2(B.length);Z!==Math.floor(Z)&&(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,
t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE));t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,g);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.s(),r.G(),0,t.RGBA,ea,B);b(null);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1);G.F();z.set("s0");r.B();t.clearColor(0,0,0,0);t.clear(t.COLOR_BUFFER_BIT);b(K);L.g(!0,!1);t.deleteTexture(K)},instance:function(r){function B(){b(na);ja&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,ja);g.isPot?
(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,g.isMirrorX?t.MIRRORED_REPEAT:t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,g.isMirrorY?t.MIRRORED_REPEAT:t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE));g.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&t.texParameterf(t.TEXTURE_2D,JEContext.ae().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Ld);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,g.isLinear?
t.LINEAR:t.NEAREST);g.isLinear?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,g.isMipmap&&!oa?t.NEAREST_MIPMAP_LINEAR:t.LINEAR):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,g.isMipmap&&!oa?t.NEAREST_MIPMAP_NEAREST:t.NEAREST);H=y[g.oa-1];T=P[g.oa-1];Q=u[ea];if(Ja.m()){var x=t.RGBA32F;H===t.RGBA&&Q===t.FLOAT&&x&&(T=x);H===t.RGB&&Q===t.FLOAT&&x&&(T=x,H=t.RGBA)}if(g.w&&!g.isFloat||g.isFloat&&g.isMipmap&&Ia.Vc())(x=t.RGBA16F)&&(T=x),Q=Ja.la();g.Oa&&(Ga=g.Oa);g.isSrgb&&4===g.oa&&(H=JEContext.ge());
if(g.u)t.texImage2D(t.TEXTURE_2D,0,T,H,Q,g.u);else if(g.url)t.texImage2D(t.TEXTURE_2D,0,T,H,Q,ma);else if(pa){try{t.getError(),t.texImage2D(t.TEXTURE_2D,0,T,N,O,0,H,Q,pa),t.getError()!==t.NO_ERROR&&(t.texImage2D(t.TEXTURE_2D,0,T,N,O,0,H,Q,null),t.getError()!==t.NO_ERROR&&t.texImage2D(t.TEXTURE_2D,0,t.RGBA,N,O,0,t.RGBA,t.UNSIGNED_BYTE,null))}catch(pb){t.texImage2D(t.TEXTURE_2D,0,T,N,O,0,H,Q,null)}g.isKeepArray||(pa=null)}else t.texImage2D(t.TEXTURE_2D,0,T,N,O,0,H,Q,null);if(g.isMipmap)if(!oa&&X)X.Ea(),
Ha=!0;else if(oa){x=Math.log(Math.min(N,O))/Math.log(2);ra=Array(1+x);ra[0]=na;for(var S=1;S<=x;++S){var ka=Math.pow(2,S),U=N/ka;ka=O/ka;var ya=t.createTexture();b(ya);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texImage2D(t.TEXTURE_2D,0,T,U,ka,0,H,Q,null);b(null);ra[S]=ya}Ha=!0}b(null);v[k]=-1;ja&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1);wa=!0;g.L&&X&&(g.L(X),g.L=null)}var g=Object.assign({},F,r),K=n++;null===g.isFlipY&&
(g.isFlipY=g.url||g.array?!0:!1);g.data&&(g.array="string"===typeof g.data?Ea(g.data):g.isFloat?new Float32Array(g.data):new Uint8Array(g.data),g.isFlipY=!1);var ea=0,Z=g.u?!0:!1,V=null,la=null,Ca=!1,Aa=null;g.w=g.w||g.isFloat;g.w&&(ea=1);g.Rc||Ja.m()||!g.isFloat||!ia||Ja.lb()||(g.isFloat=!1);g.isFloat&&(ea=2);g.isAnisotropicFiltering&&Y&&!JEContext.le()&&(g.isAnisotropicFiltering=!1);var na=t.createTexture(),ma=null,pa=!1,N=0,O=0,wa=!1,ha=!1,A=null,I=null,aa=null,sa=null,T=null,H=null,Q=null,ja=
g.isFlipY,oa=g.w&&g.isMipmap&&"undefined"!==typeof Ia&&!Ia.qc()?!0:!1,ra=null,Ga=-1,Ha=!1,za={Db:!1,kb:null,rb:null};g.width&&(N=g.width,O=g.height?g.height:N);var X={get:function(){return na},s:function(){return N},G:function(){return O},je:function(){return g.url},me:function(){return g.isFloat},pe:function(){return g.w},qe:function(){return g.isLinear},Ea:function(){t.generateMipmap(t.TEXTURE_2D)},mc:function(x,S){oa?(x||(x=X.ub()),X.Aa(S),b(ra[x]),v[S]=-1):X.a(S)},ub:function(){-1===Ga&&(Ga=Math.log(N)/
Math.log(2));return Ga},Gc:function(x){if(oa){x||(x=X.ub());z.set("s11");X.Aa(0);for(var S=N,ka=O,U=1;U<=x;++U)S/=2,ka/=2,z.Y("u7",.25/S,.25/ka),t.viewport(0,0,S,ka),b(ra[U-1]),t.framebufferTexture2D(G.P(),t.COLOR_ATTACHMENT0,t.TEXTURE_2D,ra[U],0),L.g(!1,1===U);v[0]=-1}else X.Ea()},Aa:function(x){x!==k&&(t.activeTexture(p[x]),k=x)},a:function(x){if(!wa)return!1;X.Aa(x);if(v[x]===K)return!1;b(na);v[x]=K;return!0},jb:function(x){t.activeTexture(p[x]);k=x;b(na);v[x]=K},l:function(){q=X;t.framebufferTexture2D(G.P(),
t.COLOR_ATTACHMENT0,t.TEXTURE_2D,na,0)},B:function(){q=X;t.viewport(0,0,N,O);t.framebufferTexture2D(G.P(),t.COLOR_ATTACHMENT0,t.TEXTURE_2D,na,0)},Za:E.Za,resize:function(x,S){N=x;O=S;B()},clone:function(x){x=E.instance({width:N,height:O,w:g.w,isFloat:g.isFloat,isLinear:g.isLinear,isMirrorY:g.isMirrorY,isFlipY:x?!ja:ja,isPot:g.isPot});Fa.set("s0");G.F();x.l();t.viewport(0,0,N,O);X.a(0);L.g(!0,!0);return x},Ad:function(){t.viewport(0,0,N,O)},remove:function(){t.deleteTexture(na);D.splice(D.indexOf(X),
1);X=null},refresh:function(){X.jb(0);ja&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0);Z?t.texImage2D(t.TEXTURE_2D,0,T,H,t.UNSIGNED_BYTE,g.u):t.texImage2D(t.TEXTURE_2D,0,T,N,O,0,H,Q,pa);ja&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1)},mb:function(){var x=N*O*4;I=[new Uint8Array(x),new Uint8Array(x),new Uint8Array(x),new Uint8Array(x)];A=[new Float32Array(I[0].buffer),new Float32Array(I[1].buffer),new Float32Array(I[2].buffer),new Float32Array(I[3].buffer)];aa=new Uint8Array(4*x);sa=new Float32Array(aa.buffer);
ha=!0},Ua:function(){ha||X.mb();t.readPixels(0,0,N,4*O,t.RGBA,t.UNSIGNED_BYTE,aa);for(var x=N*O,S=2*x,ka=3*x,U=0;U<x;++U)A[0][U]=sa[U],A[1][U]=sa[U+x],A[2][U]=sa[U+S],A[3][U]=sa[U+ka];return A},qd:function(){za.Db||(za.kb=new Uint8Array(N*O*4),za.rb=new Float32Array(za.buffer),za.Db=!0);t.readPixels(0,0,N,O,t.RGBA,t.UNSIGNED_BYTE,za.kb);return za.rb},Ca:function(x){G.v();z.set("s12");X.a(0);if(x)t.viewport(0,0,N,O),z.Va("u8",.25,.25,.25,.25),L.g(!1,!0);else for(x=0;4>x;++x)t.viewport(0,O*x,N,O),z.Va("u8",
C[x]),L.g(!1,0===x)},Fe:function(x){var S=Q===u[0]&&!l();b(na);ja&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0);S?(Ca||(V=document.createElement("canvas"),V.width=N,V.height=O,la=V.getContext("2d"),Aa=la.createImageData(N,O),Ca=!0),Aa.data.set(x),la.putImageData(Aa,0,0),t.texImage2D(t.TEXTURE_2D,0,T,H,Q,V)):t.texImage2D(t.TEXTURE_2D,0,T,N,O,0,H,Q,x);v[k]=K;ja&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1)},Ge:function(x,S){b(na);S&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0);t.texImage2D(t.TEXTURE_2D,0,T,H,Q,x);
v[k]=K;S&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1)},ve:function(x,S){var ka=N*O,U=4*ka;x=g.w?x?"RGBE":"JSON":"RGBA";S&&(x=S);S=Ja.m()&&!1;var ya=null;switch(x){case "RGBE":ya="s40";break;case "JSON":ya=S?"s0":"s12";break;case "RGBA":case "RGBAARRAY":ya="s6"}ha||("RGBA"===x||"RGBE"===x||"RGBAARRAY"===x?(I=new Uint8Array(U),ha=!0):"JSON"!==x||S||X.mb());G.v();z.set(ya);X.a(0);U=null;if("RGBA"===x||"RGBE"===x||"RGBAARRAY"===x){t.viewport(0,0,N,O);L.g(!0,!0);t.readPixels(0,0,N,O,t.RGBA,t.UNSIGNED_BYTE,
I);if("RGBAARRAY"===x)return{data:I};J||(e=document.createElement("canvas"),w=e.getContext("2d"),J=!0);e.width=N;e.height=O;ka=w.createImageData(N,O);ka.data.set(I);w.putImageData(ka,0,0);U=e.toDataURL("image/png")}else if("JSON"===x)if(S)U=new Float32Array(ka),t.viewport(0,0,N,O),L.g(!0,!0),t.readPixels(0,0,N,O,t.RGBA,t.FLOAT,U);else{for(U=0;4>U;++U)t.viewport(0,O*U,N,O),z.Va("u8",C[U]),L.g(!U,!U);X.Ua();U=Array(ka);for(S=0;S<ka;++S)U[4*S]=A[0][S],U[4*S+1]=A[1][S],U[4*S+2]=A[2][S],U[4*S+3]=A[3][S]}return{format:x,
data:U,width:N,height:O,isMirrorY:g.isMirrorY,isFlipY:"RGBA"===x?g.isFlipY:!g.isFlipY}}};g.isMipmap&&!oa&&wa&&!Ha&&(X.Ea(),Ha=!0);if(g.url)b(na),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null),ma=new Image,ma.Sd="Anonymous",ma.crossOrigin="Anonymous",ma.src=g.url,ma.onload=function(){N=ma.width;O=ma.height;B()};else if(g.u){var Oa=function(){N=void 0!==g.u.videoWidth?g.u.videoWidth:g.u.width;O=void 0!==g.u.videoHeight?g.u.videoHeight:g.u.height;N?B():setTimeout(Oa,1)};Oa()}else g.array?
(g.w&&!g.isFloat?g.array instanceof Uint16Array?(pa=g.array,B()):f()?(pa=d(g.array),B()):(B(),E.Fc(X,g.array,ja)):(pa=g.isFloat?g.array instanceof Float32Array?g.array:new Float32Array(g.array):g.array instanceof Uint8Array?g.array:new Uint8Array(g.array),B()),g.isKeepArray||(pa&&pa!==g.array&&(pa=null),delete g.array)):B();X.fe=X.s;g.L&&wa&&(g.L(X),g.L=null);D.push(X);return X},v:function(r){r!==k&&(t.activeTexture(p[r]),k=r);v[r]=-1;b(null)},Od:function(r){h.random.a(r)},Za:function(){q=null;t.framebufferTexture2D(G.P(),
t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)},reset:function(){for(var r=0;r<p.length;++r)v[r]=-1;k=-1},ue:function(){k=-1},Hd:function(){for(var r=0;r<p.length;++r)E.v(r)},sb:function(){h&&(h.random.remove(),h.Yb.remove())},Ee:function(r,B){if("RGBA"===r.format||"RGBE"===r.format){var g=new Image;g.src=r.data;g.onload=function(){E.instance({isMirrorY:r.isMirrorY,isFlipY:r.isFlipY,isFloat:!1,u:g,L:function(K){if("RGBA"===r.format)B(K);else{var ea=r.width,Z=r.height,V=E.instance({isMirrorY:r.isMirrorY,
isFloat:!0,width:ea,height:Z,isFlipY:r.isFlipY});G.F();t.viewport(0,0,ea,Z);z.set("s41");V.l();K.a(0);L.g(!0,!0);E.v(0);B(V);t.flush();setTimeout(K.remove,50)}}})}}else"JSON"===r.format?B(E.instance({isFloat:!0,isFlipY:r.isFlipY,width:r.width,height:r.height,array:new Float32Array(r.data)})):B(!1)},h:function(){q&&(G.F(),E.Za(),G.v());E.Hd();D.slice(0).forEach(function(r){r.remove()});D.splice(0);M=!1;n=0;Ia.h()}};return E}(),La={instance:function(b){var c=[R.instance(b),R.instance(b)],d=[c[1],c[0]],
f=d,l={Tb:function(m){f[1].l();f[0].a(m);l.Xb()},we:function(m){f[1].B();f[0].a(m);l.Xb()},Xb:function(){f=f===c?d:c},refresh:function(){f[0].refresh();f[1].refresh()},a:function(m){f[0].a(m)},Nd:function(m){f[1].a(m)},Jc:function(){return f[0]},remove:function(){f[0].remove();f[1].remove();f=null}};return l}},Ja=function(){function b(){c="undefined"===typeof Ka?JEContext:Ka;d=!0}var c=null,d=!1,f=!1,l=null,m=null,k=!1,p=null,n=!1,v=null,h=!1,q=null,u=!1,y=!0,P=!0,M=!0,D=null,F="undefined"===typeof window?
{}:window,J={i:function(){if(d)return!0;b();J.pb();J.Da();J.Cc();J.Dc();G.i();R.i();if(!J.xc())return!1;L.i();R.Pc();return!0},s:function(){d||b();return c.s()},G:function(){d||b();return c.G()},m:function(){d||b();return c.m()},Cc:function(){u=(q=t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_color_buffer_float"))?!0:!1;F.GL_EXT_COLORBUFFERFLOAT=q},Dc:function(){t.getExtension("EXT_color_buffer_half_float")||t.getExtension("WEBGL_color_buffer_half_float")||
t.getExtension("OES_color_buffer_half_float")},pb:function(){if(!f){this.m()||(l=t.getExtension("OES_texture_float")||t.getExtension("MOZ_OES_texture_float")||t.getExtension("WEBKIT_OES_texture_float"),k=(F.GL_EXT_FLOAT=l)?!0:!1);if(k||this.m())m=t.getExtension("OES_texture_float_linear")||t.getExtension("MOZ_OES_texture_float_linear")||t.getExtension("WEBKIT_OES_texture_float_linear"),F.GL_EXT_FLOATLINEAR=m;f=!0}},Da:function(){if(!h){if(!this.m()){if(p=t.getExtension("OES_texture_half_float")||
t.getExtension("MOZ_OES_texture_half_float")||t.getExtension("WEBKIT_OES_texture_half_float"))D=p.HALF_FLOAT_OES,n=!0;!D&&t.HALF_FLOAT&&(D=t.HALF_FLOAT);!D&&t.FLOAT&&(D=t.FLOAT);F.GL_EXT_HALFFLOAT=p}if(n||this.m())v=t.getExtension("OES_texture_half_float_linear")||t.getExtension("MOZ_OES_texture_half_float_linear")||t.getExtension("WEBKIT_OES_texture_half_float_linear"),F.GL_EXT_HALFFLOATLINEAR=v;h=!0}},la:function(){if(J.m())return t.HALF_FLOAT;J.Da();return n?D:t.FLOAT},lb:function(){return y},
pc:function(){return P},Pd:function(){return M},oc:function(){return u},zc:function(){P=y=!0;var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var w=t.createTexture();t.bindTexture(t.TEXTURE_2D,w);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);t.texImage2D(t.TEXTURE_2D,0,J.m()&&t.RGBA32F?t.RGBA32F:t.RGBA,1,1,0,t.RGBA,t.FLOAT,null);t.framebufferTexture2D(G.P(),t.COLOR_ATTACHMENT0,t.TEXTURE_2D,w,0);var C=t.checkFramebufferStatus(G.Fa());
C!==t.FRAMEBUFFER_COMPLETE&&(y=!1);t.texImage2D(t.TEXTURE_2D,0,J.m()&&t.RGBA16F?t.RGBA16F:t.RGBA,1,1,0,t.RGBA,J.la(),null);t.framebufferTexture2D(G.P(),t.COLOR_ATTACHMENT0,t.TEXTURE_2D,w,0);C=t.checkFramebufferStatus(G.Fa());C!==t.FRAMEBUFFER_COMPLETE&&(P=!1);t.bindTexture(t.TEXTURE_2D,null);t.bindFramebuffer(t.FRAMEBUFFER,null);t.deleteTexture(w);t.deleteFramebuffer(e)},yc:function(){var e=G.instance({width:1});e.Sb();var w=R.instance({width:1,isFloat:!0,oa:3});e.l();w.l();t.flush();t.checkFramebufferStatus(G.Fa())!==
t.FRAMEBUFFER_COMPLETE?(R.wd(),M=!1):M=!0;e.remove();w.remove()},xc:function(){J.zc();if(!y&&!P)return!1;J.yc();return!0},h:function(){R.h();Fa.h();G.h();L.h();d=!1}};return J}(),Ia=function(){function b(y,P,M,D){t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,D?t.NEAREST_MIPMAP_NEAREST:t.LINEAR);var F=null;try{if(F=t.getError(),F!==t.NO_ERROR&&console.log("GLERR in test_mipmapping():",F),t.texImage2D(t.TEXTURE_2D,0,y,2,2,0,t.RGBA,P,M),F=t.getError(),F!==t.NO_ERROR)return!1}catch(J){return!1}D&&
t.generateMipmap(t.TEXTURE_2D);L.Ba();L.g(!1,!0);t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,k);F=t.getError();F===t.INVALID_OPERATION&&"undefined"!==typeof t.PIXEL_PACK_BUFFER&&(t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,k),F=t.getError());return F!==t.NO_ERROR?!1:0!==k[0]}function c(y){return Ja.lb()&&b(h,t.FLOAT,new Float32Array(n),y)?(m=l.cb,!0):!1}function d(y){return Ja.pc()?b(q,Ja.la(),new Uint16Array(n),y)||b(q,t.FLOAT,new Float32Array(n),y)?(m=l.wa,
!0):!1:!1}var f=!1,l={cb:3,wa:2,RGBA8:0},m=l.RGBA8,k=new Uint8Array(4),p=[.8,1,.8,1],n=p.concat(p,p,p),v=!0,h=null,q=null,u={i:function(){Ja.pb();Ja.Da();q=h=t.RGBA;if(Ka.m()){var y=t.RGBA32F;y&&(h=y);(y=t.RGBA16F)&&(q=y)}L.i();G.reset();G.v();t.viewport(0,0,1,1);z.set("s0");f=!0;y=t.createTexture();t.activeTexture(t.TEXTURE0);t.bindTexture(t.TEXTURE_2D,y);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,
t.NEAREST);if(d(!0)||c(!0))return!0;v=!1;if(d(!1)||c(!1))return!0;if(Ka.m()){q=h=t.RGBA;if(d(!0)||c(!0))return!0;v=!1;if(d(!1)||c(!1))return!0}return!1},qc:function(){return v},ce:function(){return m},oe:function(){f||u.i();return m===l.cb},Vc:function(){f||u.i();return m===l.wa},h:function(){f=!1;m=l.RGBA8;v=!0}};return u}(),Ma={instance:function(b){var c=R.instance(b.alpha),d=R.instance(b.beta);return{Bc:function(){c.a(1);d.a(2)}}}},Pa={instance:function(b){var c=null,d=!1,f=!1,l=null,m=!1,k=!1,
p=null,n="undefined"===typeof b.preprocessing?!1:b.preprocessing,v="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(d=!0,a&&void 0!==a.ic&&(b.mask=a.ic+b.mask),c=R.instance({isFloat:!1,url:b.mask}));var h=!1;b.customInputShader&&(h="s42",z.fb({name:"_",id:h,b:b.customInputShader,c:["uSource"],precision:"lowp"}),z.D(h,[{type:"1i",name:"_",value:0}]));switch(n){case "sobel":p="s31";m=!0;break;case "meanNormalization":p="s32";m=!0;break;case "grayScale":p="s28";m=!1;break;
case "grayScaleTilt":p="s29";k=!0;m=!1;break;case "rgbGrayTilt":p="s30";k=!0;m=!1;break;case "copy":p=h?h:"s0";break;case "inputLightRegulation":p=h?h:"s28";l=Na.instance({Bb:v,Mb:b.size,Gb:b.nBlurPass,Uc:!1});f=!0;break;case "direct":case "none":p=!1;break;default:p="s3"}k&&z.D(p,[{name:"u26",type:"1f",value:b.tilt}]);d&&(p+="Mask");var q=R.instance({isFloat:!1,isPot:!1,width:b.size}),u={s:function(){return v},Ga:function(){return u.s()},Mc:function(){return f?l.vb():q},A:function(){G.F();p&&(z.set(p),
m&&z.C("u27",1/b.size),q.B(),d&&c.a(1),L.g(!1,!1),q.a(0),f&&l.process(q))},h:function(){q.remove();d&&c.remove()}};return u}},Va={instance:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var c={input:null,fa:null,Ka:null,I:null,qa:null,Sa:null,Ta:null},d=null,f=[],l=[],m=!1,k=null,p=!0,n=-1,v=b.isReorganize?b.isReorganize:!1,h=b.kernelsNumber?!0:!1,q=b.dynPelu?Ma.instance(b.dynPelu):!1,u=q?!0:!1,y={isEnabled:!1};b.Tc?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:
b.ra.Ga(),p=!1):"full"===b.connectivityUp&&(b.sparsity=b.ra.Ga());var P={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],M=b.sparsity*b.sparsity,D=!1,F=b.size,J="";if(b.maxPooling){switch(b.maxPooling.size){case 2:J="s33";break;case 4:J="s34"}D=!0;F/=b.maxPooling.size;c.Sa=R.instance({isFloat:!0,isPot:!1,width:F})}var e=void 0!==b.ld&&b.ld?!0:!1,w=null,C=null,Y=null;if(e){w="s43"+b.index.toString();z.zb("s43",w,[((b.normalization.n-
1)/2).toFixed(1)]);z.D(w,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u31",value:b.normalization.k}]);var ia={isFloat:!0,isPot:!0,width:b.size};C=R.instance(ia);Y=R.instance(ia)}var ba=-1,ca=null;p&&(c.I=R.instance({isFloat:!0,isPot:!1,width:b.size}));c.fa=R.instance(b.bias);var fa={s:function(){return b.size},Ga:function(){return F},tb:function(){return b.classesCount},
lc:function(E){d.a(E)},od:function(){b.remap&&b.remap.isEnabled&&(y={isEnabled:!0,Wc:R.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(E){return b.parent.Kc(E)}),depth:b.remap.depth})},yd:function(){switch(b.connectivityUp){case "direct":ca=Qa.instance(b.connectivity);break;case "square":ca=Ra.instance(b.connectivity);break;case "squareFast":ca=Sa.instance(b.connectivity,b.activation);break;
case "full":ca=Ta.instance(b.connectivity);break;case "conv":n=b.kernelsNumber,ca=Ua.instance(b.connectivity),v&&(c.qa=R.instance({width:F,isFloat:!0,isFlipY:!1,isPot:!1}))}if(ca.T){var E=b.size*b.sparsity;ba=Math.log(E/b.size)/Math.log(2);c.input=R.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:E,Oa:ba});c.Ka=R.instance({isFloat:!0,isPot:!0,width:b.size})}},A:function(E){d=E;ca.T?(c.input.B(),h&&c.fa.a(2),ca.A(y),c.input.a(0),c.input.Gc(ba),c.Ka.B(),h?z.set("s0"):(z.set("s27"),z.C("u25",M),c.fa.a(1)),
c.input.mc(ba,0),L.g(!1,!1),z.set(P),e?C.l():c.I.l(),c.Ka.a(0),u&&q.Bc(),L.g(!1,!1)):(c.I.B(),c.fa.a(1),ca.A());e&&(z.set(w),Y.l(),C.a(0),L.g(!1,!1),z.set("s44"),z.C("u6",1),c.I.l(),Y.a(1),L.g(!1,!1));if(p)return D?(c.Sa.B(),c.I.a(0),z.set(J),z.Y("u7",1/b.size,1/b.size),L.g(!1,!1),E=c.Sa):E=c.I,E.a(0),v&&(c.qa.l(),z.set("s21"),z.Y("u12",n,F/n),L.g(!1,!1),E=c.qa,c.qa.a(0)),E;E=c.I;b.disableNormalize||(z.set("gpuRawAvg"===m?"s8":"s7"),z.C("u4",1/b.size),c.Ta.B(),c.I.a(0),L.g(!1,!1),E=c.Ta);switch(m){case "cpuRGBA2Float":E.Ca(!1);
E=fa.pd(E);k(E);break;case "cpuMeanFloat":E.Ca(!0);E=E.qd();k(E);break;case "gpuRawAvg":case "gpuRaw":E.a(0);case "none":k(E)}return!1},tc:function(E){E&&"undefined"!==typeof E.Lb&&(m=E.Lb,k=E.nd);c.I=R.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});E="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var r=0,B=0,g=0;r<E;++r)f.push(B+(b.size-1-g)*b.size),l.push([-1,-1,-1,-1]),++B,B===b.size&&(B=0,++g);b.disableNormalize||(c.Ta=R.instance({isFloat:!0,isPot:!0,
width:b.size}))},pd:function(E){var r=E.Ua();f.forEach(function(B,g){l[g][0]=r[0][B];l[g][1]=r[1][B];l[g][2]=r[2][B];l[g][3]=r[3][B]});return l},h:function(){for(var E in c){var r=c[E];r&&r.remove()}ca&&(ca.h(),ca=null)}};b.ra&&fa.yd(b.ra);return fa}};
function Wa(){var b=null,c=null,d=null,f=0;this.Kc=function(l){return b[l]};this.vd=function(l){var m=null;f=l.length;b=l.map(function(k,p){k=Object.assign({},k,{index:p,parent:this,ra:m,Tc:p===f-1});return m=p=0===p?Pa.instance(k):Va.instance(k)});c=b[0];d=b[f-1];b.forEach(function(k,p){0!==p&&k.od()})};this.A=function(l,m){var k=m;b.forEach(function(p){k=p.A(k,l)});return k};this.Ic=function(){return c.s()};this.Nc=function(){return d.s()};this.vb=function(){return d.Mc()};this.xd=function(l){d.tc(l)};
this.tb=function(){return d.tb()};this.h=function(){b&&(b.forEach(function(l){l.h()}),d=c=b=null,f=0)}}
var Qa={instance:function(b){var c=R.instance(b.weights);delete b.weights.data;return{T:!0,ka:function(){return 1},h:function(){c.remove()},Oc:function(){return c},A:function(){z.set("s26");c.a(1);L.g(!1,!1)}}}},Ta={instance:function(b){var c=b.fromLayerSize,d=R.instance(b.weights);delete b.weights.data;return{T:!0,ka:function(){return c},h:function(){d.remove()},A:function(f){if(f.isEnabled){z.set("s24");f.Wc.a(3);var l,m=Math.min(f.layers.length,f.depth);for(l=0;l<m;++l)f.layers[l].lc(4+l)}else z.set("s23");
z.C("u16",b.toLayerSize);d.a(1);L.g(!1,!1)}}}},Ra={instance:function(b){for(var c=b.fromLayerSize,d=b.toLayerSize,f=b.toSparsity,l=f*d,m=l/c,k=c/d,p=0,n=0,v=0,h=Array(f*d*f*d*4),q=Array(f*d*f*d*4),u=Array(c*c),y=0;y<u.length;++y)u[y]=0;y=Math.floor(f/2);for(var P=.5/d,M=.5/c,D=.5/l,F=0;F<d;++F)for(var J=Math.round(F*k),e=0;e<d;++e){var w=Math.round(e*k),C=F/d,Y=e/d;C+=P;Y+=P;for(var ia=0;ia<f;++ia){var ba=J+ia-y;0>ba&&(ba+=c);ba>=c&&(ba-=c);for(var ca=0;ca<f;++ca){var fa=p/l,E=n/l,r=w+ca-y;0>r&&(r+=
c);r>=c&&(r-=c);var B=ba/c,g=r/c;E=1-E-1/l;B+=M;g+=M;fa+=D;E+=D;var K=F*f+ia,ea=e*f+ca;ea=d*f-ea-1;K=ea*d*f+K;h[4*K]=fa;h[4*K+1]=E;h[4*K+2]=B;h[4*K+3]=g;g=u[r*c+ba]++;K=g%m;B=ba*m+K;r=r*m+(g-K)/m;r=c*m-1-r;r=r*c*m+B;q[4*r]=fa;q[4*r+1]=E;q[4*r+2]=C;q[4*r+3]=Y;++p>=l&&(p=0,++n);++v}}}u=null;var Z=R.instance(b.weights);delete b.weights.data;var V=R.instance({width:l,isFloat:!0,array:new Float32Array(q),isPot:!0});q=null;var la=R.instance({width:l,isFloat:!0,array:new Float32Array(h),isPot:!0});h=null;
return{T:!0,ka:function(){return m},h:function(){V.remove();la.remove();Z.remove()},A:function(){z.set("s22");Z.a(1);la.a(2);L.g(!1,!1)}}}},Ua={instance:function(b){var c=b.kernelsNumber,d=b.toSparsity,f=d*b.toLayerSize/b.fromLayerSize,l=R.instance(b.weights);delete b.weights.data;return{T:!0,ka:function(){return f},he:function(){return d},Oc:function(){return l},h:function(){l.remove()},A:function(){z.set("s25");z.C("u22",c);z.C("u23",d);z.C("u16",b.toLayerSize);z.C("u24",b.fromLayerSize);l.a(1);
L.g(!1,!1)}}}},Sa={instance:function(b,c){var d=b.fromLayerSize,f=b.toLayerSize,l=b.toSparsity,m=b.stride?b.stride:1,k=l*f/d,p=f<d,n=d/f,v=R.instance(b.weights);delete b.weights.data;var h="s45"+[d.toString(),f.toString(),l.toString(),m.toString(),c].join("_");z.Ec(h)||(b=Ba(c),f=[{type:"1f",name:"u16",value:f},{type:"1f",name:"u30",value:m}],p&&f.push({type:"1f",name:"u24",value:d}),d=[(p?k:l).toFixed(1),b],p&&d.push(n.toFixed(1)),z.zb(p?"s39":"s38",h,d),z.D(h,f.concat([{type:"1i",name:"u14",value:0},
{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{T:!1,ka:function(){return k},h:function(){v.remove()},A:function(){z.set(h);v.a(3);L.g(!1,!1)}}}},Na={instance:function(b){var c=b.Gb?b.Gb:3,d=b.Bb?b.Bb:64,f=b.Mb?b.Mb:64,l=b.Uc?!0:!1;b={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var m=R.instance(b),k=R.instance(b),p=R.instance(b),n=R.instance(b),v=R.instance({isFloat:!0,width:f,isPot:!1,isFlipY:!1}),h=1/d;return{process:function(q){z.set("s35");n.l();L.g(l,!1);z.set("s36");for(var u=
0;u<c;++u)m.l(),z.Y("u7",h,0),L.g(l,!1),p.l(),n.a(0),L.g(l,!1),k.l(),m.a(0),z.Y("u7",0,h),L.g(l,!1),n.l(),p.a(0),L.g(l,!1),u!==c-1&&k.a(0);z.set("s37");v.l();q.a(0);k.a(1);n.a(2);L.g(l,!1);v.a(0)},vb:function(){return v}}}};function Xa(b,c){b[c]=!0;b.setAttribute(c,"true")}function Ya(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function Za(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function $a(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function ab(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function bb(b){if(!b)return b;var c=!1;if(b.video){var d=function(f){var l={};"undefined"!==typeof f.min&&(l.min=f.min);"undefined"!==typeof f.max&&(l.max=f.max);"undefined"!==typeof f.ideal&&(l.ideal=f.ideal);return l};c={};"undefined"!==typeof b.video.width&&(c.width=d(b.video.width));"undefined"!==typeof b.video.height&&(c.height=d(b.video.height));"undefined"!==typeof b.video.facingMode&&(c.facingMode=b.video.facingMode)}c={audio:b.audio,video:c};"undefined"!==typeof b.deviceId&&(c.deviceId=b.deviceId);
return c}function cb(b){var c=b.video.width;b.video.width=b.video.height;b.video.height=c;return b}
function db(b){function c(q){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(u,y){return Math.abs(u-q)-Math.abs(y-q)})}function d(q){var u=bb(b);f.push(q(u))}var f=[];if(!b||!b.video)return f;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var l=c(b.video.width.ideal).slice(0,3),m=c(b.video.height.ideal).slice(0,3),k={},p=0;for(k.K=void 0;p<l.length;k={K:k.K},++p){k.K=l[p];var n={},v=0;for(n.J=void 0;v<m.length;n={J:n.J},++v)if(n.J=m[v],
k.K!==b.video.width.ideal||n.J!==b.video.height.ideal){var h=Math.max(k.K,n.J)/Math.min(k.K,n.J);h<4/3-.1||h>16/9+.1||d(function(q,u){return function(y){y.video.width.ideal=q.K;y.video.height.ideal=u.J;return y}}(k,n))}}}d(function(q){return cb(q)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&d(function(q){delete q.video.width.ideal;delete q.video.height.ideal;return q}),d(function(q){delete q.video.width;delete q.video.height;return q}));b.video.facingMode&&(d(function(q){delete q.video.facingMode;
return q}),b.video.width&&b.video.height&&d(function(q){cb(q);delete q.video.facingMode;return q}));f.push({audio:b.audio,video:!0});return f}function eb(b){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(f){c=window.innerHeight>window.innerWidth}if(c&&b&&b.video){c=b.video.width;var d=b.video.height;c&&d&&c.ideal&&d.ideal&&c.ideal>d.ideal&&(b.video.height=c,b.video.width=d)}}
function fb(b){b.volume=0;Xa(b,"muted");if($a()){if(1===b.volume){var c=function(){b.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){b.volume=0;Xa(b,"muted")},5)}}
function gb(b,c,d,f){function l(k){m||(m=!0,d(k))}var m=!1;navigator.mediaDevices.getUserMedia(f).then(function(k){function p(){setTimeout(function(){if(b.currentTime){var n=b.videoWidth,v=b.videoHeight;if(0===n||0===v)l("VIDEO_NULLSIZE");else{n&&(b.style.width=n.toString()+"px");v&&(b.style.height=v.toString()+"px");n={rc:null,Bd:null,ad:null};try{var h=k.getVideoTracks()[0];h&&(n.ad=h,n.rc=h.getCapabilities(),n.Bd=h.getSettings())}catch(q){}$a()||Ya()?b.parentNode&&null!==b.parentNode?(m||c(b,k,
n),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),fb(b),m||c(b,k,n),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";fb(b);setTimeout(function(){b.play()},100)},80)):m||c(b,k,n)}}else l("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=k:(b.src=window.URL.createObjectURL(k),b.videoStream=k);fb(b);b.addEventListener("loadeddata",function(){var n=b.play();fb(b);"undefined"===typeof n?
p():n.then(function(){p()}).catch(function(){l("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(k){l(k)})}
function hb(b,c,d){var f=ab()?document.createElement("video"):!1;if(f)if(ab()){if(d&&d.video){if(Ya()){var l=Za();(12>l[0]||12===l[0]&&2>l[1])&&eb(d)}d.video.width&&d.video.width.ideal&&(f.style.width=d.video.width.ideal+"px");d.video.height&&d.video.height.ideal&&(f.style.height=d.video.height.ideal+"px")}Xa(f,"autoplay");Xa(f,"playsinline");d&&d.audio?f.volume=0:Xa(f,"muted");gb(f,b,function(){function m(p){if(0===p.length)c("INVALID_FALLBACKCONSTRAINTS");else{var n=p.shift();gb(f,b,function(){m(p)},
n)}}var k=db(d);m(k)},d)}else c&&c("MEDIASTREAMAPI_NOTFOUND");else c&&c("VIDEO_NOTPROVIDED")}
var ib=function(){var b=0,c,d,f,l;return{i:function(m,k){b=m.length;c=k;d=m;f=new Float32Array(b);l=new Float32Array(b)},Lc:function(){return l},Cd:function(m,k,p){m.forEach(function(n,v){var h=Math.min(1,d[v]*p*(k+.33*(1-k)));n=h*n+(1-h)*f[v];f[v]=n;l[v]=c[v](n)})}}}(),W={N:[],ya:!1,za:!1,xa:!1,eb:!1,ca:!0,ba:!1,ready:!1,initialized:!1},jb={facingMode:"user",idealWidth:320,idealHeight:240,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},a={save:"jeelizFaceTransferNNC.json",
ab:"../../",fc:0,width:512,height:512,bd:.25,Xc:.7,hd:3,borderWidth:.4,W:.35,jd:5,kd:3,Ya:[.06,.08,.15],Gd:55,cd:.6,Yc:5.8,bc:.75,ac:1,gb:[.03,1],Kd:20,ea:.2,O:[30,55],bb:3,jc:1/3.5,Jb:11,Fb:1,fd:1,hb:[.1,.01],sd:[.4,-.7,-.4],td:[.3,0,0],Rb:[5,7],Ac:!1,S:[0,7],hc:.001,ib:[Math.PI/10,Math.PI/6],Nb:[0,6],Ob:[.1,.4],Pb:[.009,.02],Qb:[.02,.04],Qa:8,yb:[3,7],xb:.05,ec:[.2,.2,.15,.15,.15,.15,.2,.2,.15,.15,.2],gd:[ta.bind(null,.05,.7),ta.bind(null,.05,.7),ta.bind(null,0,.4),ta.bind(null,0,.4),ta.bind(null,
0,.6),ta.bind(null,0,.6),ua.bind(null,.1,.6),ta.bind(null,.1,.4),xa.bind(null,.68,.77,2),xa.bind(null,.68,.77,2),ta.bind(null,.15,.5)]};W.get_nMorphs=function(){return a.Jb};var kb=null,lb=null,mb=null,nb=[];
function ob(){function b(){1===++g&&(ib.i(a.ec,a.gd),c(),W.ready=!0,W.N.forEach(function(A){A()}),W.N.splice(0,W.N.length),d(),g=0)}function c(){C=qa();Y=new Uint8Array(y*y*4);W.get_morphTargetInfluences=function(){return C};W.get_morphTargetInfluencesStabilized=function(){return ib.Lc()};W.set_morphUpdateCallback=function(A){ia=A};W.get_rotation=function(){return ca};W.get_positionScale=function(){var A=e.Wb.Jc();A.Ca();A=A.Ua();r[0]=1-A[1][0];r[1]=A[2][0];r[2]=A[3][0]*M[0];return r};W.get_rotationStabilized=
function(){return E};W.switch_sleep=function(A){ea!==K.ta||A?ea=A?K.ta:K.ia:d()};W.on_detect=function(A){A(Z.H);Z.Ra.push(A)};W.is_detected=function(){return Z.H};W.set_animateDelay=function(A){v=A}}function d(){ea!==K.ia&&(ea=K.ia,V.timestamp=Date.now(),f(),m())}function f(){h&&(window.clearTimeout(h),h=null);q&&(window.cancelAnimationFrame(q),q=null)}function l(){ea!==K.ta&&(h=setTimeout(m,v))}function m(){a:{if("VIDEO"===B.element.nodeName){var A=B.element.currentTime-wa;0>A&&(wa=B.element.currentTime);
if(1E3*A<a.Kd)break a;wa+=A}B.Z.refresh();A=ha.wb();A[0]===B.ha[0]&&A[1]===B.ha[1]||ha.Zb();z.set("s47");G.F();e.La.B();B.Z.a(0);L.g(!1,!0)}A=ea===K.ia?V.pa:1;for(var I=0;I<A;++I){var aa=e,sa=u;z.set("s48");G.F();aa.ma.B();aa.La.a(0);aa.ua.a(1);L.g(!1,!1);aa.ma.a(0);sa.A(!1,aa.ma)}W.ca&&(G.Id(),z.set("s5"),e.La.a(0),L.g(!1,!1),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE),w.a(0),L.g(!1,!1),t.disable(t.BLEND));t.flush();I=Date.now();aa=I-V.timestamp;V.timestamp=I;V.Hb=A/aa;V.Pa=V.Hb*a.ea+V.Pa*(1-
a.ea);V.Ib=1E3/aa;V.R=V.Ib*a.ea+V.R*(1-a.ea);V.R>a.O[1]?(++V.pa,V.R=(a.O[0]+a.O[1])/2):V.R<a.O[0]&&(V.pa=Math.max(V.pa-1,a.bb),V.R=(a.O[0]+a.O[1])/2);V.ga=a.jc/Math.max(V.Pa,.001);ea!==K.ta&&(q=window.requestAnimationFrame(l))}var k=-1,p=-1,n=64,v=a.fc,h=!1,q=!1,u=null,y=0,P=null,M=null,D=null,F=0,J=0,e={},w=null,C=null,Y=null,ia=null,ba=[0,0,0],ca=[0,0,0],fa=[0,0,0],E=[0,0,0],r=[0,0,0],B={element:null,Z:null,ha:[-1,-1]},g=0,K={wc:-4,md:-3,te:-2,ta:-1,ia:0},ea=K.md,Z={na:0,H:!1,Ra:[]},V={timestamp:0,
Hb:0,Pa:0,pa:a.bb,Ib:0,R:0,ga:1},la=1,Ca=1,Aa=1,na=1,ma=[0,0,0],pa=Date.now(),N=new Float32Array(a.Qa),O=0,wa=0,ha={Ab:function(){k=a.width;p=a.height;F=a.bd;J=a.Xc;var A=k/n;F*=A;J*=A;P={Ed:(1-2*a.borderWidth)/a.jd,Fd:(1-2*a.W)/a.kd,Dd:(J-F)/a.hd,dd:a.borderWidth,ed:a.W,Zc:1-a.borderWidth,$c:1-a.W};D={n:0,x:a.borderWidth,y:a.W,scale:F};M=[n/k,n/p]},Vb:function(){z.D("s48",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u32",value:1},{type:"2f",name:"u33",value:M}]);z.D("s49",[{type:"1i",name:"u32",
value:0},{type:"2f",name:"u33",value:M},{type:"3f",name:"u34",value:[0,.5,1]}]);z.D("s50",[{type:"1i",name:"u35",value:0},{type:"1i",name:"u32",value:1},{type:"1f",name:"u36",value:a.cd},{type:"1f",name:"u37",value:a.Yc},{type:"1f",name:"u38",value:a.Gd},{type:"1f",name:"u39",value:a.bc},{type:"1f",name:"u40",value:a.ac},{type:"1f",name:"u41",value:M[0]}]);z.D("s51",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u5",value:1},{type:"1f",name:"u42",value:a.gb[0]},{type:"1f",name:"u43",value:a.gb[1]}])},
uc:function(){z.dc([{id:"s47",name:"_",aa:"attribute vec2 a0;uniform vec2 u44,u45;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u45+u44*a0;}",da:["a0"],U:[2],b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1","u44","u45"],precision:"lowp"},{id:"s48",name:"_",b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",aa:"attribute vec2 a0;uniform sampler2D u32;uniform vec2 u33;const vec2 f=vec2(.25,.5),h=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u32,f);vec2 b=a.gb,c=a.a*u33,d=a0*.5+e;vv0=b+(d-e)*c,gl_Position=vec4(a0,0.,1.);}",
da:["a0"],U:[2],c:["u1","u32","u33"],precision:"lowp"},{id:"s50",name:"_",aa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",b:"uniform sampler2D u35,u32;uniform vec3 u46,u47;uniform float u36,u37,u38,u39,u40,u41,u48;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 d=texture2D(u35,vec2(.4375,.9375)),f=texture2D(u35,vec2(.5625,.9375)),a=texture2D(u32,vec2(.5,.5));float c=dot(d,e),g=dot(f,e);bool h=c>u39&&c>g+u40;h?a.r=2.:a.r>u38?a.r=0.:a.r>1.9&&(a.a>u37||a.a<u36)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u46,a.r=1.;else{float i=dot(e,texture2D(u35,vec2(.0625,.9375))),j=dot(e,texture2D(u35,vec2(.1875,.9375))),k=dot(e,texture2D(u35,vec2(.3125,.9375))),b;if(a.r>1.9)b=1.-u48;else b=1.,a.r=0.;float l=a.a*u41;a.gba+=vec3(i,j,k)*u47*b*l;}gl_FragColor=a;}",
c:"u35 u32 u46 u36 u37 u38 u39 u40 u47 u41 u48".split(" ")},{id:"s49",name:"_",b:"uniform sampler2D u32;uniform vec3 u34;uniform vec2 u33;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 f=texture2D(u32,vec2(.25,.5));vec2 g=f.gb;float j=f.a;vec2 a=j*u33,c=g+a,d=g;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),h=step(d,vv0)*step(vv0,c);float l=h.x*h.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u34*max(b.x,b.y),1.);}",c:["u32","u33","u34"],precision:"lowp"},{id:"s51",name:"_",b:"uniform sampler2D u1,u5;uniform float u42,u43,u48;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);float c=(1.-u48)*(u43-u42)+u42;gl_FragColor=mix(b,a,c*f);}",
c:["u1","u5","u42","u43","u48"]}])},Qc:function(A){var I=new Float32Array([0,a.borderWidth,a.W,0]);A.La=R.instance({isPot:!1,se:!0,isFloat:!1,width:k,height:p});A.ma=R.instance({isPot:!0,isFloat:!1,width:n});I={width:1,height:1,isFloat:!0,isPot:!1,array:I};A.ua=La.instance(I);A.Wb=La.instance(I)},vc:function(){B.Z=R.instance({u:B.element,isPot:!1,isFloat:!1,isFlipY:!0});w=R.instance({isPot:!1,isFloat:!1,width:k,height:p})},i:function(){function A(){var T=I(a.yb[0],a.yb[1]);Z.na=a.xb*T+(1-a.xb)*Z.na;
.6<Z.na&&!Z.H?(Z.Ra.forEach(function(H){H(!0)}),Z.H=!0):.4>Z.na&&Z.H&&(Z.Ra.forEach(function(H){H(!1)}),Z.H=!1)}function I(T,H){T+=y*H;return(Y[4*T]+Y[4*T+1]+Y[4*T+2]+Y[4*T+3])/1020}function aa(){C.forEach(function(T,H){if(Z.H){T=(a.Fb+H)%y;var Q=a.fd+Math.floor((a.Fb+H)/y);Q=y-1-Q;T=I(T,Q);C[H]=T}else C[H]=0})}function sa(T){u=new Wa;u.vd(T.layers);u.xd({Lb:"gpuRaw",nd:function(H){var Q=e;Q.ua.Tb(1);t.viewport(0,0,1,1);z.set("s50");z.C("u48",la);z.Ub("u46",D.x,D.y,D.scale);z.Ub("u47",1*a.Ya[0],1*
a.Ya[1],1*a.Ya[2]);L.g(!1,!1);1!==++D.n%2&&(D.scale+=P.Dd,D.scale>J&&(D.x+=P.Ed,D.scale=F,D.x>P.Zc&&(D.x=P.dd,D.y+=P.Fd,D.y>P.$c&&(D.y=P.ed))));Q.Wb.Tb(1);z.set("s51");z.C("u48",la);Q.ua.a(0);L.g(!1,!1);R.rd(H,Y);aa();if(!a.Ac&&Z.H)for(H=0;3>H;++H)Q=I(H+a.Rb[0],a.Rb[1]),Q=(2*Q-1)*a.sd[H],Q+=a.td[H],ba[H]=Q;A();H=Date.now();Q=H-pa;var ja=I(a.Nb[0],a.Nb[1]);Aa=ua(a.Ob[0],a.Ob[1],ja);ja=I(a.S[0],a.S[1]);var oa=I(a.S[0]+1,a.S[1]),ra=I(a.S[0]+2,a.S[1]);Ca=1-ua(a.Qb[0],a.Qb[1],Math.sqrt(ja*ja+oa*oa+ra*
ra)/Q);ja=ma[0]-ba[0];oa=ma[1]-ba[1];ra=ma[2]-ba[2];Q=Math.sqrt(ja*ja+oa*oa+ra*ra)/Q;ma[0]=ba[0];ma[1]=ba[1];ma[2]=ba[2];na=1-ua(a.Pb[0],a.Pb[1],Q);la=Aa*Ca*na;pa=H;N[O]=la;O=(O+1)%a.Qa;for(H=0;H<a.Qa;++H)la=Math.min(N[H],la);ib.Cd(C,la,V.ga);ia&&ia(la,V.ga);if(Z.H)for(H=a.hb[1]*la+a.hb[0]*(1-la),H*=V.ga,Q=0;3>Q;++Q)ca[Q]=H*ba[Q]+(1-H)*ca[Q],E[Q]=ca[Q];else H=Date.now()*a.hc,fa[0]=a.ib[0]*Math.sin(H),fa[1]=a.ib[1]*Math.cos(H),E[0]=fa[0],E[1]=fa[1],E[2]=fa[2];H=e;G.F();w.B();z.set("s49");H.ua.a(0);
L.g(!1,!1)}});T=u.Ic();T!==n&&(n=T,ha.Ab(),e.ma.resize(n,n),ha.Vb());y=u.Nc();b()}ha.vc();ha.Qc(e);mb?sa(mb):da(function(T){T=JSON.parse(T);sa(T)})},h:function(){f();u&&(u.h(),u=null);ea=K.wc},sc:function(A){W.ya&&W.ya();var I={video:{facingMode:{ideal:jb.facingMode},width:{min:jb.minWidth,max:jb.maxWidth,ideal:jb.idealWidth},height:{min:jb.minHeight,max:jb.maxHeight,ideal:jb.idealHeight}},audio:W.eb};jb.deviceId&&(constraints.deviceId=jb.deviceId);hb(function(aa,sa){kb=sa;W.za&&W.za();A(aa)},function(){window.va&&
window.va("WEBCAM_UNAVAILABLE")},I)},Eb:function(A,I){ha.uc();B.element=A;lb=B.element;ha.Zb();ha.Ab();ha.Vb();ha.i();I&&I()},wb:function(){var A=[-1,-1],I=B.element;"VIDEO"===I.nodeName?(A[0]=I.videoWidth,A[1]=I.videoHeight):(A[0]=I.width,A[1]=I.height);return A},Zb:function(){var A=ha.wb();B.ha[0]=A[0];B.ha[1]=A[1];Ka.ja().width=A[0];Ka.ja().height=A[1];a.width=A[0];a.height=A[1];var I=[.5,.5],aa=A[1]/A[0];A=Ka.G()/Ka.s();aa>A?1>=aa?I[0]*=aa:I[1]/=aa:(I[0]*=aa,aa=1/A,I[0]*=aa,I[1]*=aa);I[1]*=A;
z.D("s47",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u44",value:I},{type:"2f",name:"u45",value:[.5,.5]}])}};nb.push(ha);return ha}W.onLoad=function(b){W.ready?b():W.N.push(b)};W.set_audio=function(b){W.eb=b};W.switch_displayVideo=function(b){W.ca=b;W.ba&&(W.ba.style.display=W.ca?"block":"none")};W.onWebcamAsk=function(b){W.ya=b};W.onContextLost=function(b){W.xa=b};W.onWebcamGet=function(b){W.za=b};
W.destroy=function(){lb&&lb.srcObject&&lb.srcObject.getTracks().forEach(function(b){b.stop()});nb.forEach(function(b){b.h()});nb.splice(0);Ka.h();W.switch_displayVideo(!1);W.initialized=!1;W.N.splice(0)};W.set_size=function(b,c){a.width=b;a.height=c};W.get_size=function(){return{width:a.width,height:a.height}};W.get_videoStream=function(){return kb};W.get_video=function(){return lb};W.get_cv=function(){return Ka.ja()};W.set_color=function(b){z.D("s49",[{type:"3f",name:"u34",value:b}])};
W.init=function(b){var c=ob(),d=b.callbackReady?b.callbackReady:function(l){console.log("ERR:",l)},f=b.callbackReady?b.callbackReady.bind(!1):!1;if("undefined"===typeof b.canvasId)d("NO_CANVASID");else if(document.getElementById(b.canvasId))if(W.initialized)d("ALREADY_INITIALIZED");else{W.initialized=!0;window.va=d?function(l){d(l);window.va=!1}:!1;b.NNCpath&&(a.ab=b.NNCpath);"undefined"!==typeof b.NNC&&(mb="string"===typeof b.NNC?JSON.parse(b.NNC):b.NNC);f&&W.N.push(f);if(!Ka.i({ob:b.canvasId,width:a.width,
height:a.height,debug:!1,Ma:!1,Kb:function(){W.xa&&W.xa()},premultipliedAlpha:!1}))return d("GL_INCOMPATIBLE"),!1;W.ba=Ka.ja();W.ca||(W.ba.style.display="none");L.i();G.i();z.i();R.i();t.depthFunc(t.LEQUAL);t.clearDepth(1);b.videoSettings&&b.videoSettings.videoElement?c.Eb(b.videoSettings.videoElement,!1):(b.videoSettings&&Object.assign(jb,b.videoSettings),c.sc(function(l){c.Eb(l,!1)}));return!0}else d("INVALID_CANVASID")};window.JEEFACETRANSFERAPI=W;
;return JEEFACETRANSFERAPI;})();